{% extends 'base/index.html' %}
{% load static %}

{% block title %}Products{% endblock %}

{% block body %}
    <main class="page-product">
  <div class="container">
    <!-- Product Info Section -->
    <section class="product-details-section">
      <div class="product-image-container">
        <img src="{{ object.image.url }}" alt="{{ object.name }}" class="product-image">
      </div>
      <div class="product-info-column">
        <div class="product-title-price">
          <h1 class="product-name">{{ object.name }}</h1>
          <div class="price-section">
            <span class="price-tag">{{ object.category.name }}</span>
            <p class="product-price">${{ object.price }}</p>
          </div>
        </div>
        <div class="product-description">
            {{ object.description|linebreaks }}
        </div>
        {% if user.is_authenticated %}
        <div class="cart-controls">
          <button class="button button--primary add-to-cart-button" id="add-to-cart-btn">
            <i class="fa-solid fa-cart-shopping"></i>
            <span>Add to Cart</span>
          </button>
          <div class="quantity-counter is-hidden" id="quantity-counter">
            <button class="quantity-btn" data-action="decrease" aria-label="Decrease quantity"><i class="fa-solid fa-minus"></i></button>
            <span class="quantity-value">1 in cart</span>
            <button class="quantity-btn" data-action="increase" aria-label="Increase quantity"><i class="fa-solid fa-plus"></i></button>
          </div>
        </div>
        <div class="review">
            <button class="button add-review-button" id="add-review-btn">
                <i class="fa-solid fa-message"></i>
                <span>Add Review</span>
            </button>
        </div>
        {% endif %}
      </div>
    </section>

    <!-- Latest Reviews Section -->
    <section class="reviews-form-section hide" id="reviews-form-section">
        <div class="review-form">
            <form action="{% url 'products:add-review' %}" class="review-form">
                {% csrf_token %}
                <div class="Rating">
                    {% for value, label in rating_choices %}
                        <label>
                            <input type="radio" name="{{ review_form.rating.name }}" value="{{ value }}" required>
                            <span class="star">â˜…</span>
                        </label>
                    {% endfor %}
                </div>
                <div class="comment">
                    {{ review_form.comment }}
                </div>

                <button type="submit" class="button add-review-button mt-2">
                    <i class="fa-solid fa-message"></i>
                    <span>Save Review</span>
                </button>
            </form>
        </div>
    </section>

    <section class="reviews-section">
      <h2 class="reviews-title">Latest reviews</h2>
      <div class="reviews-grid">
        <!-- Review Card 1 -->
        <div class="review-card">
          <div class="review-rating">
            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
          </div>
          <div class="review-body">
            <h4 class="review-heading">The Perfect Sweet Spot</h4>
            <p class="review-text">60L is my favorite caramel malt. It's not too light and not too dark. It provides the perfect balance of sweetness and caramel flavor for my Amber Ales. The color comes out just gorgeous.</p>
          </div>
          <div class="review-author">
            <img src="{% static '/img/tmp2.svg' %}" alt="User avatar" class="author-avatar">
            <span class="author-name">AmberAleFanatic</span>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>
{% endblock %}